# AI抽出結果の統合システム技術解説

## レイヤ構成
- **Base Layer (c1_base)**: 従来の差分抽出ロジックで得られた結果。
- **Pen Layer (c1p)**: AI (U-2-NET) が「オブジェクトのコア」と判断した確率マップからの抽出結果。
- **Mask Layer (c1k)**: ユーザーが手動で削った領域。

## 統合ロジック
最終的な表示アルファは以下の優先順位で決定される：
1. `max(Base, Pen)` : 既存の抽出結果とAIの結果を「和」で統合。どちらかが不透明なら不透明。
2. その結果に対し、`Mask` が 0 以上の箇所でアルファを減算（消しゴム）。

## WASMへの伝達
この統合された `c1_final` バッファを WASM 側の計算ルーチンへ渡し、ストレートRGBの再計算を行うことで、手動とAIが融合した高品質な透過画像を生成する。
